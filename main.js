!function(){"use strict";class e{constructor(e,t){let{data:s,clickHandler:n}=e;this._name=s.name,this._link=s.link,this._selectors=t,this._handleCardClick=n,this._isLiked=!1}_getTemplate(){return document.querySelector(this._selectors.templateSelector).content.querySelector(this._selectors.cardSelector).cloneNode(!0)}initiateCard(){this._cardElement=this._getTemplate();const e=this._cardElement.querySelector(this._selectors.titleSelector);return this._image=this._cardElement.querySelector(this._selectors.imageSelector),this._like=this._cardElement.querySelector(this._selectors.likeSelector),this._delete=this._cardElement.querySelector(this._selectors.deleteSelector),e.textContent=this._name,this._image.alt="A picture of ".concat(this._name,"."),this._image.src=this._link,this._setEventListeners(),this._cardElement}_setEventListeners(){this._like.addEventListener("click",(()=>{this._likeCard()})),this._delete.addEventListener("click",(()=>{this._deleteCard()})),this._image.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)}))}_likeCard(){this._like.classList.toggle(this._selectors.likeActiveClass),this._isLiked=!this._isLiked}_deleteCard(){this._cardElement.remove()}}class t{constructor(e,t){this._formElement=document.querySelector(e),this._keys=t}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}_setEventListeners(){this._inputList=[...this._formElement.querySelectorAll(this._keys.inputSelector)],this._buttonElement=this._formElement.querySelector(this._keys.submitButtonSelector),this._toggleButtonState(),this._formElement.addEventListener("reset",(()=>{this._toggleButtonState()})),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_showInputError(e,t){const s=this._formElement.querySelector(".popup__error_type_".concat(e.id));e.classList.add(this._keys.inputErrorClass),s.textContent=t,s.classList.add(this._keys.errorClass)}_hideInputError(e){const t=this._formElement.querySelector(".popup__error_type_".concat(e.id));e.classList.remove(this._keys.inputErrorClass),t.textContent="",t.classList.remove(this._keys.errorClass)}_toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._keys.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)):(this._buttonElement.classList.remove(this._keys.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}}function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class n{constructor(e){s(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),s(this,"_handleClickClose",(e=>{e.target.classList.contains("popup")&&this.close()})),this._popupElement=document.querySelector(e),this._closeButton=this._popupElement.querySelector(".popup__exit-button")}close(){this._popupElement.classList.add("invisible"),document.removeEventListener("keydown",this._handleEscClose)}open(){this._popupElement.classList.remove("invisible"),document.addEventListener("keydown",this._handleEscClose)}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",this._handleClickClose)}}class i extends n{constructor(e,t){super(e),this._submitHandler=t,this._formElement=this._popupElement.querySelector(".popup__form")}_getInputValues(){const e=this._formElement.querySelectorAll(".popup__input");return{input1:e[0].value,input2:e[1].value}}setEventListeners(){this._formElement.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._submitHandler(t)})),super.setEventListeners()}close(){this._formElement.reset(),super.close()}open(){this._formElement.reset(),super.open()}}const r={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},o={templateSelector:"#card-template",likeActiveClass:"gallery__button_active",deleteSelector:".gallery__delete-button",likeSelector:".gallery__button",imageSelector:".gallery__image",titleSelector:".gallery__title",cardSelector:".gallery__cell"},l=document.querySelector("#name"),a=document.querySelector("#about-me"),c=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__add-button"),u=new class{constructor(e){let{selectors:t}=e;this._selectors=t,this._userName=document.querySelector(this._selectors.nameSelector),this._userJob=document.querySelector(this._selectors.jobSelector)}getUserInfo(){return{name:this._userName.textContent,job:this._userJob.textContent}}setUserInfo(e){let{name:t,job:s}=e;this._userName.textContent=t,this._userJob.textContent=s}}({selectors:{nameSelector:".profile__name",jobSelector:".profile__career"}}),d=new i("#edit-container",(e=>{u.setUserInfo({name:e.input1,job:e.input2}),d.close()})),h=t=>new e({data:t,clickHandler:(e,t)=>{m.open(e,t)}},o).initiateCard(),p=new i("#add-container",(e=>{const t={name:e.input1,link:e.input2},s=h(t);E.addItem(s),p.close()})),m=new class extends n{constructor(e){super(e)}open(e,t){const s=this._popupElement.querySelector(".popup__image"),n=this._popupElement.querySelector(".popup__image-title");s.src=t,s.alt="Image of ".concat(e),n.textContent=e,super.open()}}("#image-container"),E=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){return this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{const t=h(e);E.addItem(t)}},".gallery__container");["#edit-bio","#add-image"].forEach((e=>{new t(e,r).enableValidation()})),E.renderItems(),d.setEventListeners(),p.setEventListeners(),m.setEventListeners(),c.addEventListener("click",(()=>{const e=u.getUserInfo();l.value=e.name,a.value=e.job,d.open()})),_.addEventListener("click",(()=>{p.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQWUsTUFBTUEsRUFDakJDLFlBQVksRUFBd0JDLEdBQVcsSUFBbkMsS0FBRUMsRUFBRixhQUFRQyxHQUEyQixFQUMzQ0MsS0FBS0MsTUFBUUgsRUFBS0ksS0FDbEJGLEtBQUtHLE1BQVFMLEVBQUtNLEtBQ2xCSixLQUFLSyxXQUFhUixFQUNsQkcsS0FBS00saUJBQW1CUCxFQUN4QkMsS0FBS08sVUFBVyxFQUdwQkMsZUFFSSxPQURvQkMsU0FBU0MsY0FBY1YsS0FBS0ssV0FBV00sa0JBQWtCQyxRQUFRRixjQUFjVixLQUFLSyxXQUFXUSxjQUFjQyxXQUFVLEdBSS9JQyxlQUNJZixLQUFLZ0IsYUFBZWhCLEtBQUtRLGVBQ3pCLE1BQU1TLEVBQVFqQixLQUFLZ0IsYUFBYU4sY0FBY1YsS0FBS0ssV0FBV2EsZUFROUQsT0FQQWxCLEtBQUttQixPQUFTbkIsS0FBS2dCLGFBQWFOLGNBQWNWLEtBQUtLLFdBQVdlLGVBQzlEcEIsS0FBS3FCLE1BQVFyQixLQUFLZ0IsYUFBYU4sY0FBY1YsS0FBS0ssV0FBV2lCLGNBQzdEdEIsS0FBS3VCLFFBQVV2QixLQUFLZ0IsYUFBYU4sY0FBY1YsS0FBS0ssV0FBV21CLGdCQUMvRFAsRUFBTVEsWUFBY3pCLEtBQUtDLE1BQ3pCRCxLQUFLbUIsT0FBT08sSUFBWix1QkFBa0MxQixLQUFLQyxNQUF2QyxLQUNBRCxLQUFLbUIsT0FBT1EsSUFBTTNCLEtBQUtHLE1BQ3ZCSCxLQUFLNEIscUJBQ0U1QixLQUFLZ0IsYUFHaEJZLHFCQUNJNUIsS0FBS3FCLE1BQU1RLGlCQUFpQixTQUFTLEtBQ2pDN0IsS0FBSzhCLGVBRVQ5QixLQUFLdUIsUUFBUU0saUJBQWlCLFNBQVMsS0FDbkM3QixLQUFLK0IsaUJBRVQvQixLQUFLbUIsT0FBT1UsaUJBQWlCLFNBQVMsS0FDbEM3QixLQUFLTSxpQkFBaUJOLEtBQUtDLE1BQU9ELEtBQUtHLFVBSS9DMkIsWUFDSTlCLEtBQUtxQixNQUFNVyxVQUFVQyxPQUFPakMsS0FBS0ssV0FBVzZCLGlCQUM1Q2xDLEtBQUtPLFVBQVlQLEtBQUtPLFNBRzFCd0IsY0FDSS9CLEtBQUtnQixhQUFhbUIsVUM3Q1gsTUFBTUMsRUFDakJ4QyxZQUFZeUMsRUFBY0MsR0FDdEJ0QyxLQUFLdUMsYUFBZTlCLFNBQVNDLGNBQWMyQixHQUMzQ3JDLEtBQUt3QyxNQUFRRixFQUdqQkcsbUJBQ0l6QyxLQUFLdUMsYUFBYVYsaUJBQWlCLFVBQVdhLElBQzFDQSxFQUFJQyxvQkFFUjNDLEtBQUs0QixxQkFHVEEscUJBQ0k1QixLQUFLNEMsV0FBYSxJQUFJNUMsS0FBS3VDLGFBQWFNLGlCQUFpQjdDLEtBQUt3QyxNQUFNTSxnQkFDcEU5QyxLQUFLK0MsZUFBaUIvQyxLQUFLdUMsYUFBYTdCLGNBQWNWLEtBQUt3QyxNQUFNUSxzQkFDakVoRCxLQUFLaUQscUJBQ0xqRCxLQUFLdUMsYUFBYVYsaUJBQWlCLFNBQVMsS0FDeEM3QixLQUFLaUQsd0JBRVRqRCxLQUFLNEMsV0FBV00sU0FBU0MsSUFDckJBLEVBQWF0QixpQkFBaUIsU0FBUyxLQUNuQzdCLEtBQUtvRCxvQkFBb0JELEdBQ3pCbkQsS0FBS2lELDJCQUtqQkcsb0JBQW9CRCxHQUNYQSxFQUFhRSxTQUFTQyxNQUd2QnRELEtBQUt1RCxnQkFBZ0JKLEdBRnJCbkQsS0FBS3dELGdCQUFnQkwsRUFBY0EsRUFBYU0sbUJBTXhERCxnQkFBZ0JMLEVBQWNPLEdBQzFCLE1BQU1DLEVBQWUzRCxLQUFLdUMsYUFBYTdCLGNBQWxCLDZCQUFzRHlDLEVBQWFTLEtBQ3hGVCxFQUFhbkIsVUFBVTZCLElBQUk3RCxLQUFLd0MsTUFBTXNCLGlCQUN0Q0gsRUFBYWxDLFlBQWNpQyxFQUMzQkMsRUFBYTNCLFVBQVU2QixJQUFJN0QsS0FBS3dDLE1BQU11QixZQUcxQ1IsZ0JBQWdCSixHQUNaLE1BQU1RLEVBQWUzRCxLQUFLdUMsYUFBYTdCLGNBQWxCLDZCQUFzRHlDLEVBQWFTLEtBQ3hGVCxFQUFhbkIsVUFBVUcsT0FBT25DLEtBQUt3QyxNQUFNc0IsaUJBQ3pDSCxFQUFhbEMsWUFBYyxHQUMzQmtDLEVBQWEzQixVQUFVRyxPQUFPbkMsS0FBS3dDLE1BQU11QixZQUc3Q2QscUJBQ1FqRCxLQUFLZ0UsaUJBQWlCaEUsS0FBSzRDLGFBQzNCNUMsS0FBSytDLGVBQWVmLFVBQVU2QixJQUFJN0QsS0FBS3dDLE1BQU15QixxQkFDN0NqRSxLQUFLK0MsZUFBZW1CLGFBQWEsWUFBWSxLQUU3Q2xFLEtBQUsrQyxlQUFlZixVQUFVRyxPQUFPbkMsS0FBS3dDLE1BQU15QixxQkFDaERqRSxLQUFLK0MsZUFBZW9CLGdCQUFnQixhQUk1Q0gsbUJBQ0ksT0FBT2hFLEtBQUs0QyxXQUFXd0IsTUFBTWpCLElBQ2pCQSxFQUFhRSxTQUFTQyxTLHdIQzlEM0IsTUFBTWUsRUFDakJ6RSxZQUFZMEUsR0FBZSwwQkFLUjVCLElBQ0MsV0FBWkEsRUFBSTZCLEtBQ0p2RSxLQUFLd0UsV0FQYyw0QkFXTjlCLElBQ2JBLEVBQUkrQixPQUFPekMsVUFBVTBDLFNBQVMsVUFDOUIxRSxLQUFLd0UsV0FaVHhFLEtBQUsyRSxjQUFnQmxFLFNBQVNDLGNBQWM0RCxHQUM1Q3RFLEtBQUs0RSxhQUFlNUUsS0FBSzJFLGNBQWNqRSxjQUFjLHVCQWV6RDhELFFBQ0l4RSxLQUFLMkUsY0FBYzNDLFVBQVU2QixJQUFJLGFBQ2pDcEQsU0FBU29FLG9CQUFvQixVQUFXN0UsS0FBSzhFLGlCQUdqREMsT0FDSS9FLEtBQUsyRSxjQUFjM0MsVUFBVUcsT0FBTyxhQUNwQzFCLFNBQVNvQixpQkFBaUIsVUFBVzdCLEtBQUs4RSxpQkFHOUNFLG9CQUNJaEYsS0FBSzRFLGFBQWEvQyxpQkFBaUIsU0FBUyxLQUN4QzdCLEtBQUt3RSxXQUVUeEUsS0FBSzJFLGNBQWM5QyxpQkFBaUIsWUFBYTdCLEtBQUtpRixvQkM5Qi9DLE1BQU1DLFVBQXNCYixFQUN2Q3pFLFlBQVkwRSxFQUFlYSxHQUN2QkMsTUFBTWQsR0FDTnRFLEtBQUtxRixlQUFpQkYsRUFDdEJuRixLQUFLdUMsYUFBZXZDLEtBQUsyRSxjQUFjakUsY0FBYyxnQkFHekQ0RSxrQkFDSSxNQUFNQyxFQUFZdkYsS0FBS3VDLGFBQWFNLGlCQUFpQixpQkFDckQsTUFBTyxDQUFDMkMsT0FBUUQsRUFBVSxHQUFHRSxNQUFPQyxPQUFRSCxFQUFVLEdBQUdFLE9BRzdEVCxvQkFDSWhGLEtBQUt1QyxhQUFhVixpQkFBaUIsVUFBV2EsSUFDMUNBLEVBQUlDLGlCQUNKLE1BQU1nRCxFQUFTM0YsS0FBS3NGLGtCQUNwQnRGLEtBQUtxRixlQUFlTSxNQUV4QlAsTUFBTUosb0JBR1ZSLFFBQ0l4RSxLQUFLdUMsYUFBYXFELFFBQ2xCUixNQUFNWixRQUdWTyxPQUNJL0UsS0FBS3VDLGFBQWFxRCxRQUNsQlIsTUFBTUwsUUM5QmQsTUFBTWMsRUFBZ0IsQ0FDbEIvQyxjQUFlLGdCQUNmRSxxQkFBc0IsaUJBQ3RCaUIsb0JBQXFCLHlCQUNyQkgsZ0JBQWlCLDBCQUNqQkMsV0FBWSx3QkE4QlYrQixFQUFtQixDQUN2Qm5GLGlCQUFrQixpQkFDbEJ1QixnQkFBaUIseUJBQ2pCVixlQUFnQiwwQkFDaEJGLGFBQWMsbUJBQ2RGLGNBQWUsa0JBQ2ZGLGNBQWUsa0JBQ2ZMLGFBQWMsa0JBR1ZrRixFQUFZdEYsU0FBU0MsY0FBYyxTQUNuQ3NGLEVBQWF2RixTQUFTQyxjQUFjLGFBQ3BDdUYsRUFBYXhGLFNBQVNDLGNBQWMseUJBQ3BDd0YsRUFBWXpGLFNBQVNDLGNBQWMsd0JDdENuQ3lGLEVBQVUsSUNWRCxNQUNYdkcsWUFBWSxHQUFlLElBQWYsVUFBRUMsR0FBYSxFQUN2QkcsS0FBS0ssV0FBYVIsRUFDbEJHLEtBQUtvRyxVQUFZM0YsU0FBU0MsY0FBY1YsS0FBS0ssV0FBV2dHLGNBQ3hEckcsS0FBS3NHLFNBQVc3RixTQUFTQyxjQUFjVixLQUFLSyxXQUFXa0csYUFHM0RDLGNBQ0ksTUFBTyxDQUFDdEcsS0FBTUYsS0FBS29HLFVBQVUzRSxZQUFhZ0YsSUFBS3pHLEtBQUtzRyxTQUFTN0UsYUFHakVpRixZQUFZLEdBQWUsSUFBZixLQUFFeEcsRUFBRixJQUFRdUcsR0FBTyxFQUN2QnpHLEtBQUtvRyxVQUFVM0UsWUFBY3ZCLEVBQzdCRixLQUFLc0csU0FBUzdFLFlBQWNnRixJREhQLENBQUU1RyxVRHdDVCxDQUFDd0csYUFBYyxpQkFBa0JFLFlBQWEsc0JDdEM5REksRUFBVSxJQUFJekIsRUFBYyxtQkFBb0JwRixJQUNwRHFHLEVBQVFPLFlBQVksQ0FBRXhHLEtBQU1KLEVBQUswRixPQUFRaUIsSUFBSzNHLEVBQUs0RixTQUNuRGlCLEVBQVFuQyxXQUdKb0MsRUFBV0MsR0FDRSxJQUFJbEgsRUFBSyxDQUFFRyxLQUFNK0csRUFBVTlHLGFBQWMsQ0FBQ2tCLEVBQU9iLEtBQVUwRyxFQUFXL0IsS0FBSzlELEVBQU9iLEtBQVMwRixHQUMvRS9FLGVBSXpCZ0csRUFBVSxJQUFJN0IsRUFBYyxrQkFBbUJwRixJQUNuRCxNQUFNa0gsRUFBbUIsQ0FBQzlHLEtBQU1KLEVBQUswRixPQUFRcEYsS0FBTU4sRUFBSzRGLFFBQ2xEdUIsRUFBT0wsRUFBUUksR0FDckJFLEVBQVNDLFFBQVFGLEdBQ2pCRixFQUFRdkMsV0FHSnNDLEVBQWEsSUU1QkosY0FBNkJ6QyxFQUN4Q3pFLFlBQVkwRSxHQUNSYyxNQUFNZCxHQUdWUyxLQUFLOUQsRUFBT2IsR0FDUixNQUFNMEcsRUFBYTlHLEtBQUsyRSxjQUFjakUsY0FBYyxpQkFDOUMwRyxFQUFrQnBILEtBQUsyRSxjQUFjakUsY0FBYyx1QkFDekRvRyxFQUFXbkYsSUFBTXZCLEVBQ2pCMEcsRUFBV3BGLElBQVgsbUJBQTZCVCxHQUM3Qm1HLEVBQWdCM0YsWUFBY1IsRUFDOUJtRSxNQUFNTCxTRmlCd0Isb0JBRWhDbUMsRUFBVyxJR2hDRixNQUNYdEgsWUFBWSxFQUFxQnlILEdBQW1CLElBQXhDLE1BQUVDLEVBQUYsU0FBU0MsR0FBK0IsRUFDaER2SCxLQUFLd0gsT0FBU0YsRUFDZHRILEtBQUt5SCxVQUFZRixFQUNqQnZILEtBQUswSCxXQUFhakgsU0FBU0MsY0FBYzJHLEdBRzdDTSxjQUNJLE9BQU8zSCxLQUFLd0gsT0FBT3RFLFNBQVEwRSxJQUFTNUgsS0FBS3lILFVBQVVHLE1BR3ZEVCxRQUFRVSxHQUNKN0gsS0FBSzBILFdBQVdJLFFBQVFELEtIb0JILENBQzNCUCxNRHpCbUIsQ0FDakIsQ0FDRXBILEtBQU0sa0JBQ05FLEtBQU0sb0RBRVIsQ0FDRUYsS0FBTSxjQUNORSxLQUFNLHVEQUVSLENBQ0VGLEtBQU0saUJBQ05FLEtBQU0sMERBRVIsQ0FDRUYsS0FBTSxVQUNORSxLQUFNLG1EQUVSLENBQ0VGLEtBQU0sd0JBQ05FLEtBQU0sbURBRVIsQ0FDRUYsS0FBTSxpQkFDTkUsS0FBTSxpRENHVm1ILFNBQVdLLElBQ1QsTUFBTVgsRUFBT0wsRUFBUWdCLEdBQ3JCVixFQUFTQyxRQUFRRixLQUVsQix1QkRXbUIsQ0FBQyxZQUFhLGNDVHRCL0QsU0FBUzZFLElBQ0MsSUFBSTNGLEVBQWMyRixFQUFVbEMsR0FDcENwRCxzQkFHaEJ5RSxFQUFTUyxjQUVUaEIsRUFBUTNCLG9CQUVSK0IsRUFBUS9CLG9CQUVSOEIsRUFBVzlCLG9CQUVYaUIsRUFBV3BFLGlCQUFpQixTQUFTLEtBQ25DLE1BQU1tRyxFQUFnQjdCLEVBQVFLLGNBQzlCVCxFQUFVTixNQUFRdUMsRUFBYzlILEtBQ2hDOEYsRUFBV1AsTUFBUXVDLEVBQWN2QixJQUNqQ0UsRUFBUTVCLFVBR1ZtQixFQUFVckUsaUJBQWlCLFNBQVMsS0FDbENrRixFQUFRaEMsVSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoeyBkYXRhLCBjbGlja0hhbmRsZXIgfSwgc2VsZWN0b3JzKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdG9ycyA9IHNlbGVjdG9ycztcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBjbGlja0hhbmRsZXI7XHJcbiAgICAgICAgdGhpcy5faXNMaWtlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLnRlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMuY2FyZFNlbGVjdG9yKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy50aXRsZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLmltYWdlU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2xpa2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5saWtlU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLmRlbGV0ZVNlbGVjdG9yKTtcclxuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5faW1hZ2UuYWx0ID0gYEEgcGljdHVyZSBvZiAke3RoaXMuX25hbWV9LmA7XHJcbiAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9saWtlQ2FyZCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5fZGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGV0ZUNhcmQoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuX2ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIF9saWtlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9saWtlLmNsYXNzTGlzdC50b2dnbGUodGhpcy5fc2VsZWN0b3JzLmxpa2VBY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgdGhpcy5faXNMaWtlZCA9ICF0aGlzLl9pc0xpa2VkO1xyXG4gICAgfVxyXG5cclxuICAgIF9kZWxldGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtU2VsZWN0b3IsIHZhbGlkYXRpb25LZXlzKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fa2V5cyA9IHZhbGlkYXRpb25LZXlzO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fa2V5cy5pbnB1dFNlbGVjdG9yKV07XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fa2V5cy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpOyBcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAucG9wdXBfX2Vycm9yX3R5cGVfJHtpbnB1dEVsZW1lbnQuaWR9YCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fa2V5cy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9rZXlzLmVycm9yQ2xhc3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLnBvcHVwX19lcnJvcl90eXBlXyR7aW5wdXRFbGVtZW50LmlkfWApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2tleXMuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2tleXMuZXJyb3JDbGFzcyk7IFxyXG4gICAgfVxyXG5cclxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2tleXMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2tleXMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19leGl0LWJ1dHRvblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlQ2xpY2tDbG9zZSA9IChldnQpID0+IHtcclxuICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW52aXNpYmxlXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaW52aXNpYmxlXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Yml0SGFuZGxlcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBzdWJpdEhhbmRsZXI7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgY29uc3QgaW5wdXRMaXN0ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XHJcbiAgICAgICAgcmV0dXJuIHtpbnB1dDE6IGlucHV0TGlzdFswXS52YWx1ZSwgaW5wdXQyOiBpbnB1dExpc3RbMV0udmFsdWV9O1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0SGFuZGxlcihpbnB1dHMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTsgXHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTsgLy9vZGQgdGhhdCB0aGlzIHJlc2V0IHRyaWdnZXJzIHRoZSByZXNldCBsaXN0ZW5lciBpbiB0aGUgdmFsaWRhdG9yLCB3aGVuIHRoZSBvbmUgaW4gY2xvc2UgZG9lcyBub3QvL1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufSIsImNvbnN0IHZhbGlkYXRpb25PYmogPSB7XHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiXHJcbn1cclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCJcclxuICAgIH1cclxuXTtcclxuXHJcbmNvbnN0IGNhcmRTZWxlY3Rvckxpc3QgPSB7XHJcbiAgdGVtcGxhdGVTZWxlY3RvcjogXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gIGxpa2VBY3RpdmVDbGFzczogXCJnYWxsZXJ5X19idXR0b25fYWN0aXZlXCIsXHJcbiAgZGVsZXRlU2VsZWN0b3I6IFwiLmdhbGxlcnlfX2RlbGV0ZS1idXR0b25cIixcclxuICBsaWtlU2VsZWN0b3I6IFwiLmdhbGxlcnlfX2J1dHRvblwiLFxyXG4gIGltYWdlU2VsZWN0b3I6IFwiLmdhbGxlcnlfX2ltYWdlXCIsXHJcbiAgdGl0bGVTZWxlY3RvcjogXCIuZ2FsbGVyeV9fdGl0bGVcIixcclxuICBjYXJkU2VsZWN0b3I6IFwiLmdhbGxlcnlfX2NlbGxcIlxyXG59XHJcblxyXG5jb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWVcIik7XHJcbmNvbnN0IGlucHV0QWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Fib3V0LW1lXCIpO1xyXG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5jb25zdCBmb3JtU2VsZWN0b3JzID0gW1wiI2VkaXQtYmlvXCIsIFwiI2FkZC1pbWFnZVwiXTtcclxuY29uc3QgdXNlclNlbGVjdG9ycyA9IHtuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIiwgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2NhcmVlclwifTtcclxuXHJcblxyXG5leHBvcnQgeyB2YWxpZGF0aW9uT2JqLCBpbml0aWFsQ2FyZHMsIGNhcmRTZWxlY3Rvckxpc3QsIGlucHV0TmFtZSwgaW5wdXRBYm91dCwgZWRpdEJ1dHRvbiwgYWRkQnV0dG9uLCBmb3JtU2VsZWN0b3JzLCB1c2VyU2VsZWN0b3JzIH0iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgdmFsaWRhdGlvbk9iaiwgaW5pdGlhbENhcmRzLCBjYXJkU2VsZWN0b3JMaXN0LCBpbnB1dE5hbWUsIFxyXG4gIGlucHV0QWJvdXQsIGVkaXRCdXR0b24sIGFkZEJ1dHRvbiwgZm9ybVNlbGVjdG9ycywgdXNlclNlbGVjdG9ycyB9IGZyb20gXCIuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuY29uc3QgdXNlckJpbyA9IG5ldyBVc2VySW5mbyh7IHNlbGVjdG9yczogdXNlclNlbGVjdG9ycyB9KTtcclxuXHJcbmNvbnN0IGJpb0Zvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNlZGl0LWNvbnRhaW5lclwiLCAoZGF0YSkgPT4ge1xyXG4gIHVzZXJCaW8uc2V0VXNlckluZm8oeyBuYW1lOiBkYXRhLmlucHV0MSwgam9iOiBkYXRhLmlucHV0MiB9KVxyXG4gIGJpb0Zvcm0uY2xvc2UoKTtcclxufSk7XHJcblxyXG5jb25zdCBhZGRDYXJkID0gKGNhcmREYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZEl0ZW0gPSBuZXcgQ2FyZCh7IGRhdGE6IGNhcmREYXRhLCBjbGlja0hhbmRsZXI6ICh0aXRsZSwgbGluaykgPT4ge3BvcHVwSW1hZ2Uub3Blbih0aXRsZSwgbGluayl9fSwgY2FyZFNlbGVjdG9yTGlzdCk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkSXRlbS5pbml0aWF0ZUNhcmQoKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbmNvbnN0IGFkZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtY29udGFpbmVyXCIsIChkYXRhKSA9PiB7XHJcbiAgY29uc3QgdHJhbnNsYXRlZFZhbHVlcyA9IHtuYW1lOiBkYXRhLmlucHV0MSwgbGluazogZGF0YS5pbnB1dDJ9O1xyXG4gIGNvbnN0IGNhcmQgPSBhZGRDYXJkKHRyYW5zbGF0ZWRWYWx1ZXMpO1xyXG4gIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZCk7XHJcbiAgYWRkRm9ybS5jbG9zZSgpO1xyXG59KVxyXG5cclxuY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNpbWFnZS1jb250YWluZXJcIik7XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgY29uc3QgY2FyZCA9IGFkZENhcmQoaXRlbSk7XHJcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmQpO1xyXG4gIH1cclxufSwgXCIuZ2FsbGVyeV9fY29udGFpbmVyXCIpO1xyXG5cclxuZm9ybVNlbGVjdG9ycy5mb3JFYWNoKChzZWxlY3RvcikgPT4ge1xyXG4gIGNvbnN0IHZhbGlkYXRlZEZvcm0gPSBuZXcgRm9ybVZhbGlkYXRvcihzZWxlY3RvciwgdmFsaWRhdGlvbk9iaik7XHJcbiAgdmFsaWRhdGVkRm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuY2FyZExpc3QucmVuZGVySXRlbXMoKTtcclxuXHJcbmJpb0Zvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmFkZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjb25zdCBpbnB1dFByZWZpbGxzID0gdXNlckJpby5nZXRVc2VySW5mbygpO1xyXG4gIGlucHV0TmFtZS52YWx1ZSA9IGlucHV0UHJlZmlsbHMubmFtZTtcclxuICBpbnB1dEFib3V0LnZhbHVlID0gaW5wdXRQcmVmaWxscy5qb2I7XHJcbiAgYmlvRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkRm9ybS5vcGVuKCk7XHJcbn0pXHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IHNlbGVjdG9ycyB9KSB7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0b3JzID0gc2VsZWN0b3JzO1xyXG4gICAgICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMubmFtZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl91c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMuam9iU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7bmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsIGpvYjogdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XHJcbiAgICAgICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4odGl0bGUsIGxpbmspIHtcclxuICAgICAgICBjb25zdCBwb3B1cEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgICAgIGNvbnN0IHBvcHVwSW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS10aXRsZVwiKTtcclxuICAgICAgICBwb3B1cEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICAgICAgcG9wdXBJbWFnZS5hbHQgPSBgSW1hZ2Ugb2YgJHt0aXRsZX1gO1xyXG4gICAgICAgIHBvcHVwSW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7dGhpcy5fcmVuZGVyZXIoaXRlbSl9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJzZWxlY3RvcnMiLCJkYXRhIiwiY2xpY2tIYW5kbGVyIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9zZWxlY3RvcnMiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2lzTGlrZWQiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiY29udGVudCIsImNhcmRTZWxlY3RvciIsImNsb25lTm9kZSIsImluaXRpYXRlQ2FyZCIsIl9jYXJkRWxlbWVudCIsInRpdGxlIiwidGl0bGVTZWxlY3RvciIsIl9pbWFnZSIsImltYWdlU2VsZWN0b3IiLCJfbGlrZSIsImxpa2VTZWxlY3RvciIsIl9kZWxldGUiLCJkZWxldGVTZWxlY3RvciIsInRleHRDb250ZW50IiwiYWx0Iiwic3JjIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9saWtlQ2FyZCIsIl9kZWxldGVDYXJkIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwibGlrZUFjdGl2ZUNsYXNzIiwicmVtb3ZlIiwiRm9ybVZhbGlkYXRvciIsImZvcm1TZWxlY3RvciIsInZhbGlkYXRpb25LZXlzIiwiX2Zvcm1FbGVtZW50IiwiX2tleXMiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImFkZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaGFzSW52YWxpZElucHV0IiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInNvbWUiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZUJ1dHRvbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRXNjQ2xvc2UiLCJvcGVuIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlQ2xpY2tDbG9zZSIsIlBvcHVwV2l0aEZvcm0iLCJzdWJpdEhhbmRsZXIiLCJzdXBlciIsIl9zdWJtaXRIYW5kbGVyIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRMaXN0IiwiaW5wdXQxIiwidmFsdWUiLCJpbnB1dDIiLCJpbnB1dHMiLCJyZXNldCIsInZhbGlkYXRpb25PYmoiLCJjYXJkU2VsZWN0b3JMaXN0IiwiaW5wdXROYW1lIiwiaW5wdXRBYm91dCIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJ1c2VyQmlvIiwiX3VzZXJOYW1lIiwibmFtZVNlbGVjdG9yIiwiX3VzZXJKb2IiLCJqb2JTZWxlY3RvciIsImdldFVzZXJJbmZvIiwiam9iIiwic2V0VXNlckluZm8iLCJiaW9Gb3JtIiwiYWRkQ2FyZCIsImNhcmREYXRhIiwicG9wdXBJbWFnZSIsImFkZEZvcm0iLCJ0cmFuc2xhdGVkVmFsdWVzIiwiY2FyZCIsImNhcmRMaXN0IiwiYWRkSXRlbSIsInBvcHVwSW1hZ2VUaXRsZSIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInNlbGVjdG9yIiwiaW5wdXRQcmVmaWxscyJdLCJzb3VyY2VSb290IjoiIn0=